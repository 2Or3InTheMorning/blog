<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS设计模式 |  </title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/blog/favicon.png">
    <link rel="manifest" href="/blog/favicon.png">
    <link rel="apple-touch-icon" href="/blog/favicon.png">
    <link rel="mask-icon" href="/blog/favicon.png" color="#3eaf7c">
    <meta name="description" content=" ">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="expires" cotent="0">
    <meta http-quiv="pragma" cotent="no-cache, must-revalidate">
    
    <link rel="preload" href="/blog/assets/css/0.styles.701f3e2f.css" as="style"><link rel="preload" href="/blog/assets/js/app.a7a8f945.js" as="script"><link rel="preload" href="/blog/assets/js/2.be8a5f26.js" as="script"><link rel="preload" href="/blog/assets/js/25.dd4f1ff5.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.d866aeb9.js"><link rel="prefetch" href="/blog/assets/js/100.dbbd4ff0.js"><link rel="prefetch" href="/blog/assets/js/101.bcdedb72.js"><link rel="prefetch" href="/blog/assets/js/102.704fa120.js"><link rel="prefetch" href="/blog/assets/js/103.9e486c1e.js"><link rel="prefetch" href="/blog/assets/js/104.5832e283.js"><link rel="prefetch" href="/blog/assets/js/105.8851ad24.js"><link rel="prefetch" href="/blog/assets/js/106.8058f211.js"><link rel="prefetch" href="/blog/assets/js/107.9f138e32.js"><link rel="prefetch" href="/blog/assets/js/108.bd19d544.js"><link rel="prefetch" href="/blog/assets/js/109.7b445c7c.js"><link rel="prefetch" href="/blog/assets/js/11.746f755f.js"><link rel="prefetch" href="/blog/assets/js/110.f4ff5f9f.js"><link rel="prefetch" href="/blog/assets/js/111.16610c15.js"><link rel="prefetch" href="/blog/assets/js/112.30a12b30.js"><link rel="prefetch" href="/blog/assets/js/113.005d64fc.js"><link rel="prefetch" href="/blog/assets/js/114.e31da4be.js"><link rel="prefetch" href="/blog/assets/js/115.7c5ff5c2.js"><link rel="prefetch" href="/blog/assets/js/116.9771f199.js"><link rel="prefetch" href="/blog/assets/js/117.55b99a12.js"><link rel="prefetch" href="/blog/assets/js/118.63efaac6.js"><link rel="prefetch" href="/blog/assets/js/119.1339eae2.js"><link rel="prefetch" href="/blog/assets/js/12.afa2e943.js"><link rel="prefetch" href="/blog/assets/js/120.e3cabd78.js"><link rel="prefetch" href="/blog/assets/js/121.27267165.js"><link rel="prefetch" href="/blog/assets/js/122.0deab7ae.js"><link rel="prefetch" href="/blog/assets/js/123.2330dd7a.js"><link rel="prefetch" href="/blog/assets/js/124.ba1a098b.js"><link rel="prefetch" href="/blog/assets/js/125.406fb8b2.js"><link rel="prefetch" href="/blog/assets/js/126.7201f51e.js"><link rel="prefetch" href="/blog/assets/js/127.2aecc11c.js"><link rel="prefetch" href="/blog/assets/js/128.17dd2960.js"><link rel="prefetch" href="/blog/assets/js/129.6ef7af0c.js"><link rel="prefetch" href="/blog/assets/js/13.dfe006de.js"><link rel="prefetch" href="/blog/assets/js/130.c10c076c.js"><link rel="prefetch" href="/blog/assets/js/131.56e20497.js"><link rel="prefetch" href="/blog/assets/js/132.f135e07e.js"><link rel="prefetch" href="/blog/assets/js/133.bb82bab2.js"><link rel="prefetch" href="/blog/assets/js/134.27116301.js"><link rel="prefetch" href="/blog/assets/js/135.42db4b2d.js"><link rel="prefetch" href="/blog/assets/js/136.7e9c3d8b.js"><link rel="prefetch" href="/blog/assets/js/137.73ca56f4.js"><link rel="prefetch" href="/blog/assets/js/138.e3f56d42.js"><link rel="prefetch" href="/blog/assets/js/139.f855938c.js"><link rel="prefetch" href="/blog/assets/js/14.779e6df0.js"><link rel="prefetch" href="/blog/assets/js/140.4172d417.js"><link rel="prefetch" href="/blog/assets/js/141.e83899ed.js"><link rel="prefetch" href="/blog/assets/js/142.3abfdd4b.js"><link rel="prefetch" href="/blog/assets/js/143.d3e8d6f0.js"><link rel="prefetch" href="/blog/assets/js/144.a8580921.js"><link rel="prefetch" href="/blog/assets/js/145.01fcb9df.js"><link rel="prefetch" href="/blog/assets/js/146.af05f6aa.js"><link rel="prefetch" href="/blog/assets/js/147.b551fd02.js"><link rel="prefetch" href="/blog/assets/js/148.c3a3d2a3.js"><link rel="prefetch" href="/blog/assets/js/149.73889bef.js"><link rel="prefetch" href="/blog/assets/js/15.e9f4d896.js"><link rel="prefetch" href="/blog/assets/js/150.57b4ab40.js"><link rel="prefetch" href="/blog/assets/js/151.8916f300.js"><link rel="prefetch" href="/blog/assets/js/152.4939a319.js"><link rel="prefetch" href="/blog/assets/js/153.7c60c2b4.js"><link rel="prefetch" href="/blog/assets/js/154.fed2e05b.js"><link rel="prefetch" href="/blog/assets/js/155.2abe980a.js"><link rel="prefetch" href="/blog/assets/js/156.158d4803.js"><link rel="prefetch" href="/blog/assets/js/157.7f7887a3.js"><link rel="prefetch" href="/blog/assets/js/158.5a345893.js"><link rel="prefetch" href="/blog/assets/js/159.e5fa10f0.js"><link rel="prefetch" href="/blog/assets/js/16.48b879d6.js"><link rel="prefetch" href="/blog/assets/js/160.17d647f4.js"><link rel="prefetch" href="/blog/assets/js/161.731f7a88.js"><link rel="prefetch" href="/blog/assets/js/162.78ae6a12.js"><link rel="prefetch" href="/blog/assets/js/163.80fe87ab.js"><link rel="prefetch" href="/blog/assets/js/164.8b15a281.js"><link rel="prefetch" href="/blog/assets/js/165.97872ce9.js"><link rel="prefetch" href="/blog/assets/js/166.2a824a40.js"><link rel="prefetch" href="/blog/assets/js/167.576b1a49.js"><link rel="prefetch" href="/blog/assets/js/168.7004f818.js"><link rel="prefetch" href="/blog/assets/js/169.547f2137.js"><link rel="prefetch" href="/blog/assets/js/17.2e03062f.js"><link rel="prefetch" href="/blog/assets/js/170.3ec3a4a0.js"><link rel="prefetch" href="/blog/assets/js/171.98589c10.js"><link rel="prefetch" href="/blog/assets/js/18.2b1d83e9.js"><link rel="prefetch" href="/blog/assets/js/19.6eacc564.js"><link rel="prefetch" href="/blog/assets/js/20.2ba23637.js"><link rel="prefetch" href="/blog/assets/js/21.3653fd95.js"><link rel="prefetch" href="/blog/assets/js/22.ad99c7e4.js"><link rel="prefetch" href="/blog/assets/js/23.8a622a39.js"><link rel="prefetch" href="/blog/assets/js/24.bb822f2d.js"><link rel="prefetch" href="/blog/assets/js/26.bfb2cb8e.js"><link rel="prefetch" href="/blog/assets/js/27.1848ca92.js"><link rel="prefetch" href="/blog/assets/js/28.76807e40.js"><link rel="prefetch" href="/blog/assets/js/29.44be332a.js"><link rel="prefetch" href="/blog/assets/js/3.d6914cfa.js"><link rel="prefetch" href="/blog/assets/js/30.4e17b059.js"><link rel="prefetch" href="/blog/assets/js/31.64736373.js"><link rel="prefetch" href="/blog/assets/js/32.7b5d9d22.js"><link rel="prefetch" href="/blog/assets/js/33.11c8ab9c.js"><link rel="prefetch" href="/blog/assets/js/34.c2bd770c.js"><link rel="prefetch" href="/blog/assets/js/35.ac9c370a.js"><link rel="prefetch" href="/blog/assets/js/36.7f7e0983.js"><link rel="prefetch" href="/blog/assets/js/37.3973e632.js"><link rel="prefetch" href="/blog/assets/js/38.06023d0c.js"><link rel="prefetch" href="/blog/assets/js/39.31bb26a7.js"><link rel="prefetch" href="/blog/assets/js/4.6cc94009.js"><link rel="prefetch" href="/blog/assets/js/40.27291fa0.js"><link rel="prefetch" href="/blog/assets/js/41.a7b36cf6.js"><link rel="prefetch" href="/blog/assets/js/42.ce3800bf.js"><link rel="prefetch" href="/blog/assets/js/43.c5f19ead.js"><link rel="prefetch" href="/blog/assets/js/44.e1fa90c3.js"><link rel="prefetch" href="/blog/assets/js/45.9b0571d2.js"><link rel="prefetch" href="/blog/assets/js/46.c7af1c37.js"><link rel="prefetch" href="/blog/assets/js/47.e4b8f02f.js"><link rel="prefetch" href="/blog/assets/js/48.2fc28820.js"><link rel="prefetch" href="/blog/assets/js/49.be09be89.js"><link rel="prefetch" href="/blog/assets/js/5.dffc3a98.js"><link rel="prefetch" href="/blog/assets/js/50.f97652f1.js"><link rel="prefetch" href="/blog/assets/js/51.adbd624b.js"><link rel="prefetch" href="/blog/assets/js/52.2d7b307b.js"><link rel="prefetch" href="/blog/assets/js/53.09752d46.js"><link rel="prefetch" href="/blog/assets/js/54.fcce67d8.js"><link rel="prefetch" href="/blog/assets/js/55.44dd70a0.js"><link rel="prefetch" href="/blog/assets/js/56.fc7fa976.js"><link rel="prefetch" href="/blog/assets/js/57.c669fdc2.js"><link rel="prefetch" href="/blog/assets/js/58.5c355c65.js"><link rel="prefetch" href="/blog/assets/js/59.2211185b.js"><link rel="prefetch" href="/blog/assets/js/6.09f1af87.js"><link rel="prefetch" href="/blog/assets/js/60.9c1a721b.js"><link rel="prefetch" href="/blog/assets/js/61.dc8ccbe7.js"><link rel="prefetch" href="/blog/assets/js/62.a6a1f5ce.js"><link rel="prefetch" href="/blog/assets/js/63.02400425.js"><link rel="prefetch" href="/blog/assets/js/64.39e99c79.js"><link rel="prefetch" href="/blog/assets/js/65.02574adb.js"><link rel="prefetch" href="/blog/assets/js/66.ae8f6e26.js"><link rel="prefetch" href="/blog/assets/js/67.4072031c.js"><link rel="prefetch" href="/blog/assets/js/68.6f5cd040.js"><link rel="prefetch" href="/blog/assets/js/69.acb1a55d.js"><link rel="prefetch" href="/blog/assets/js/7.e4f39b2d.js"><link rel="prefetch" href="/blog/assets/js/70.9a02cca0.js"><link rel="prefetch" href="/blog/assets/js/71.5ada6ab8.js"><link rel="prefetch" href="/blog/assets/js/72.6a763c30.js"><link rel="prefetch" href="/blog/assets/js/73.3a237f3f.js"><link rel="prefetch" href="/blog/assets/js/74.3264c5ab.js"><link rel="prefetch" href="/blog/assets/js/75.b638c419.js"><link rel="prefetch" href="/blog/assets/js/76.643d3d11.js"><link rel="prefetch" href="/blog/assets/js/77.e27f428b.js"><link rel="prefetch" href="/blog/assets/js/78.b5a7d689.js"><link rel="prefetch" href="/blog/assets/js/79.eeafa430.js"><link rel="prefetch" href="/blog/assets/js/8.61a7ea4e.js"><link rel="prefetch" href="/blog/assets/js/80.bd8435ab.js"><link rel="prefetch" href="/blog/assets/js/81.4d979003.js"><link rel="prefetch" href="/blog/assets/js/82.0a9460d6.js"><link rel="prefetch" href="/blog/assets/js/83.9c536a0b.js"><link rel="prefetch" href="/blog/assets/js/84.39462238.js"><link rel="prefetch" href="/blog/assets/js/85.214daf79.js"><link rel="prefetch" href="/blog/assets/js/86.6a1bdd61.js"><link rel="prefetch" href="/blog/assets/js/87.1fac44a2.js"><link rel="prefetch" href="/blog/assets/js/88.ad7a8342.js"><link rel="prefetch" href="/blog/assets/js/89.e75360bd.js"><link rel="prefetch" href="/blog/assets/js/9.c8569a03.js"><link rel="prefetch" href="/blog/assets/js/90.cbbfdb96.js"><link rel="prefetch" href="/blog/assets/js/91.db8925fc.js"><link rel="prefetch" href="/blog/assets/js/92.773edd86.js"><link rel="prefetch" href="/blog/assets/js/93.1388966f.js"><link rel="prefetch" href="/blog/assets/js/94.4c6b017a.js"><link rel="prefetch" href="/blog/assets/js/95.1f9048f8.js"><link rel="prefetch" href="/blog/assets/js/96.2e70d626.js"><link rel="prefetch" href="/blog/assets/js/97.0c06a11d.js"><link rel="prefetch" href="/blog/assets/js/98.9c1e01f7.js"><link rel="prefetch" href="/blog/assets/js/99.76e289c4.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.701f3e2f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name"> </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/overview/" class="nav-link">
  总览
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/skill/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/blog/skill/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/blog/skill/js/" class="nav-link router-link-active">
  JS
</a></li><li class="dropdown-subitem"><a href="/blog/skill/web/" class="nav-link">
  Web/浏览器
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/skill/react/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/blog/skill/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/blog/skill/nodejs/" class="nav-link">
  NodeJS
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/skill/computeracy/" class="nav-link">
  计算机
</a></li><li class="dropdown-subitem"><a href="/blog/skill/algorithm/" class="nav-link">
  算法
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实践" class="dropdown-title"><span class="title">实践</span> <span class="arrow down"></span></button> <button type="button" aria-label="实践" class="mobile-dropdown-title"><span class="title">实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          平台
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/business/practice/h5/" class="nav-link">
  H5
</a></li><li class="dropdown-subitem"><a href="/blog/business/practice/pc/" class="nav-link">
  PC
</a></li><li class="dropdown-subitem"><a href="/blog/business/practice/rn/" class="nav-link">
  RN
</a></li><li class="dropdown-subitem"><a href="/blog/business/practice/other/" class="nav-link">
  其它
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/business/tool/" class="nav-link">
  工程工具
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="周边" class="dropdown-title"><span class="title">周边</span> <span class="arrow down"></span></button> <button type="button" aria-label="周边" class="mobile-dropdown-title"><span class="title">周边</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          产出
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/other/output/standard/" class="nav-link">
  前端规范
</a></li><li class="dropdown-subitem"><a href="/blog/other/output/fruit/template/" class="nav-link">
  前端工程模板（React）
</a></li></ul></li><li class="dropdown-item"><h4>
          心得
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/other/feeling/" class="nav-link">
  读书/参会心得
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">
  工具
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/overview/" class="nav-link">
  总览
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/skill/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/blog/skill/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/blog/skill/js/" class="nav-link router-link-active">
  JS
</a></li><li class="dropdown-subitem"><a href="/blog/skill/web/" class="nav-link">
  Web/浏览器
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/skill/react/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/blog/skill/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/blog/skill/nodejs/" class="nav-link">
  NodeJS
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/skill/computeracy/" class="nav-link">
  计算机
</a></li><li class="dropdown-subitem"><a href="/blog/skill/algorithm/" class="nav-link">
  算法
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实践" class="dropdown-title"><span class="title">实践</span> <span class="arrow down"></span></button> <button type="button" aria-label="实践" class="mobile-dropdown-title"><span class="title">实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          平台
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/business/practice/h5/" class="nav-link">
  H5
</a></li><li class="dropdown-subitem"><a href="/blog/business/practice/pc/" class="nav-link">
  PC
</a></li><li class="dropdown-subitem"><a href="/blog/business/practice/rn/" class="nav-link">
  RN
</a></li><li class="dropdown-subitem"><a href="/blog/business/practice/other/" class="nav-link">
  其它
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/business/tool/" class="nav-link">
  工程工具
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="周边" class="dropdown-title"><span class="title">周边</span> <span class="arrow down"></span></button> <button type="button" aria-label="周边" class="mobile-dropdown-title"><span class="title">周边</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          产出
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/other/output/standard/" class="nav-link">
  前端规范
</a></li><li class="dropdown-subitem"><a href="/blog/other/output/fruit/template/" class="nav-link">
  前端工程模板（React）
</a></li></ul></li><li class="dropdown-item"><h4>
          心得
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/other/feeling/" class="nav-link">
  读书/参会心得
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">
  工具
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>《JS》</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skill/js/async-plan/" class="sidebar-link">JS异步解决方案的发展历程</a></li><li><a href="/blog/skill/js/design-patterns/" aria-current="page" class="active sidebar-link">JS设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skill/js/design-patterns/#工厂模式" class="sidebar-link">工厂模式</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/design-patterns/#单例模式" class="sidebar-link">单例模式</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/design-patterns/#观察者模式" class="sidebar-link">观察者模式</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/design-patterns/#发布-订阅模式" class="sidebar-link">发布-订阅模式</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/design-patterns/#代理模式" class="sidebar-link">代理模式</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/design-patterns/#中介者模式" class="sidebar-link">中介者模式</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/design-patterns/#装饰者模式" class="sidebar-link">装饰者模式</a></li></ul></li><li><a href="/blog/skill/js/sort/" class="sidebar-link">Array.prototype.sort</a></li><li><a href="/blog/skill/js/dom/" class="sidebar-link">常用的DOM操作方法</a></li><li><a href="/blog/skill/js/event-loop/" class="sidebar-link">事件循环（EventLoop）</a></li><li><a href="/blog/skill/js/modular/" class="sidebar-link">CommonJS、ES6模块规范</a></li><li><a href="/blog/skill/js/regex/" class="sidebar-link">JS正则表达式</a></li><li><a href="/blog/skill/js/class/" class="sidebar-link">Class（类）</a></li><li><a href="/blog/skill/js/typescript/" class="sidebar-link">Typescript</a></li><li><a href="/blog/skill/js/other/" class="sidebar-link">其他</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js设计模式"><a href="#js设计模式" class="header-anchor">#</a> JS设计模式</h1> <blockquote><p>JS设计模式 以及 原则</p></blockquote> <p></p><div class="table-of-contents"><ul><li><a href="#js设计模式">JS设计模式</a><ul><li><a href="#工厂模式">工厂模式</a></li><li><a href="#单例模式">单例模式</a></li><li><a href="#观察者模式">观察者模式</a></li><li><a href="#发布-订阅模式">发布-订阅模式</a></li><li><a href="#代理模式">代理模式</a></li><li><a href="#中介者模式">中介者模式</a></li><li><a href="#装饰者模式">装饰者模式</a></li></ul></li></ul></div><p></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>JS设计原则（SOLID）</p> <ul><li><p><strong>S（single）单一职责原则</strong>：函数的<code>功能单一</code>。</p></li> <li><p><strong>O（open-close）开放-封闭原则</strong>：对 <code>扩展</code> 开放，对 <code>修改</code> 封闭的（增加需求时，扩展新代码，而非修改已有代码）。</p></li> <li><p><strong>L（liskov）里氏替换原则</strong>：子类 <code>可以代替父类</code>。父类能出现的地方，子类就能出现。</p></li> <li><p><strong>I（interface）接口独立原则</strong>：接口的 <code>功能单一</code>。</p></li> <li><p><strong>D（dependence）依赖倒置原则</strong>：只依赖抽象接口，<code>不必关注具体类的实现</code>。</p></li></ul></div> <h2 id="工厂模式"><a href="#工厂模式" class="header-anchor">#</a> 工厂模式</h2> <p><strong>内部包装好一个对象，然后返回。</strong>（相当于工厂、车间）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">addPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>age <span class="token operator">=</span> agge<span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person1 <span class="token operator">=</span> <span class="token function">addPerson</span><span class="token punctuation">(</span><span class="token string">'heshiyu'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> person2 <span class="token operator">=</span> <span class="token function">addPerson</span><span class="token punctuation">(</span><span class="token string">'zhouxingchi'</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>应用场景：Reat.createElement、Vue.component异步组件等</p></blockquote> <h2 id="单例模式"><a href="#单例模式" class="header-anchor">#</a> 单例模式</h2> <p><strong>保证一个类仅有一个实例。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Single</span> <span class="token punctuation">{</span>
    <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Single<span class="token punctuation">.</span>getInstance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> instance<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instance<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 利用闭包，将变量instance一直存在内存中（直到Single.getInstance为null）</span>

<span class="token keyword">const</span> obj1 <span class="token operator">=</span> Single<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj2 <span class="token operator">=</span> Single<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1 <span class="token operator">===</span> obj2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><blockquote><p>应用场景：Vuex中的Store、Redux中的Store、jQuery中的$</p></blockquote> <h2 id="观察者模式"><a href="#观察者模式" class="header-anchor">#</a> 观察者模式</h2> <p><strong>每个 被监听者 直接维护着它的 监听者列表。</strong></p> <ul><li>① 在<code>Subject对象</code>里维护一个“观察者列表”</li> <li>② 实例化<code>Observer对象</code>时，指定要监听的<code>Subject对象</code></li> <li>② 当<code>Subject对象</code>的状态发生改变时，会通知每一个依赖它的<code>Observers对象</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>observers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 取值</span>
    <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 设置值</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 状态发生改变，通知依赖</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 通知依赖</span>
    <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">observer</span> <span class="token operator">=&gt;</span> observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 添加依赖</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>observer<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> subject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subject <span class="token operator">=</span> subject<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subject<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">收到：得到更新</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>subject<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> sub <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 实例化一个Subject对象</span>
<span class="token keyword">let</span> observer1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token string">'观察者1号'</span><span class="token punctuation">,</span> sub<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 实例化观察者时，指定哪个Subject</span>
<span class="token keyword">let</span> observer2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token string">'观察者2号'</span><span class="token punctuation">,</span> sub<span class="token punctuation">)</span><span class="token punctuation">;</span>

sub<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Subject对象更新</span>

<span class="token comment">// 输出：</span>
<span class="token comment">// 观察者1号收到：得到更新1</span>
<span class="token comment">// 观察者2号收到：得到更新1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p><img src="/blog/assets/img/DesignPatterns-1.157d3bd9.png" alt="alt"></p> <blockquote><p>Vue watch、NodeJS自定义事件</p></blockquote> <h2 id="发布-订阅模式"><a href="#发布-订阅模式" class="header-anchor">#</a> 发布-订阅模式</h2> <p>和观察者模式非常相似，但是最大的区别在于：</p> <blockquote><p>在发布-订阅模式，发布者（publishers）不会直接将消息发送给特定的订阅者</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> Event <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> clientList <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 订阅者列表</span>
        listen<span class="token punctuation">,</span> <span class="token comment">// 订阅</span>
        trigger<span class="token punctuation">,</span> <span class="token comment">// 触发通知</span>
        remove<span class="token punctuation">;</span> <span class="token comment">// 移除订阅</span>

    <span class="token function-variable function">listen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
        clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">trigger</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> key <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
            fns <span class="token operator">=</span> clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>fns <span class="token operator">||</span> fns<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> fn<span class="token punctuation">;</span> fn <span class="token operator">=</span> fns<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> fns <span class="token operator">=</span> clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>fns<span class="token punctuation">)</span> <span class="token punctuation">{</span>    
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>fn<span class="token punctuation">)</span><span class="token punctuation">{</span>    
            fns <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>fns<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> l <span class="token operator">=</span> fns<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> l <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> l<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> _fn <span class="token operator">=</span> fns<span class="token punctuation">[</span>l<span class="token punctuation">]</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>_fn <span class="token operator">===</span> fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    fns<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        listen<span class="token punctuation">,</span>
        trigger<span class="token punctuation">,</span>
        remove
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

Event<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'squareMeter88'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 订阅消息</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'价格1：'</span><span class="token operator">+</span>price<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
Event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'squareMeter88'</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span> <span class="token comment">// 价格1: 20000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><p><code>发布者和订阅者</code>之间不知道对方的存在，需要通过<code>消息代理</code>来通信</p> <table><thead><tr><th>特性</th> <th>观察者模式</th> <th>发布订阅模式</th></tr></thead> <tbody><tr><td><strong>关系</strong></td> <td>直接联系</td> <td>无直接关系，通过消息代理</td></tr> <tr><td><strong>耦合度</strong></td> <td>紧耦合</td> <td>松耦合</td></tr> <tr><td><strong>适用情况</strong></td> <td>当组件之间依赖关系简单时</td> <td>当组件之间依赖关系复杂时</td></tr></tbody></table> <p><img src="/blog/assets/img/DesignPatterns-2.34414d05.png" alt="alt"></p> <h2 id="代理模式"><a href="#代理模式" class="header-anchor">#</a> 代理模式</h2> <p><strong>通过代理，间接地访问目标对象。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 源对象</span>
<span class="token keyword">class</span> <span class="token class-name">Jack</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">send</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 目标对象</span>
<span class="token keyword">class</span> <span class="token class-name">Rose</span> <span class="token punctuation">{</span>
    <span class="token function">receive</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'收到消息: '</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 代理对象</span>
<span class="token keyword">class</span> <span class="token class-name">ProxyObj</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">receive</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">send</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> proxyObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> jack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jack</span><span class="token punctuation">(</span>proxyObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
jack<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>proxyObj<span class="token punctuation">,</span> <span class="token string">'nihao'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 收到消息：nihao</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><blockquote><p>ES6 Proxy、Vuex中对getters的访问</p></blockquote> <p><strong>Jack：</strong></p> <ul><li>this.target为Proxy</li> <li>send</li></ul> <p><strong>ProxyObj：</strong></p> <ul><li>this.target为Rose</li> <li>send</li> <li>receive</li></ul> <p><strong>Rose：</strong></p> <ul><li>receive</li></ul> <h2 id="中介者模式"><a href="#中介者模式" class="header-anchor">#</a> 中介者模式</h2> <p>现实中的中介者：博彩公司</p> <ul><li>如果没有博彩公司，上千万的人一起计算赔率、输赢是非常困难</li> <li>有了博彩公司作为中介者对象，每个人只需跟博彩公司发生关联，由博彩公司来根据每个人的投注情况计算好赔率（彩民赢了，找博彩公司拿；输了就把钱交给博彩公司）</li></ul> <h3 id="一个购买商品的例子"><a href="#一个购买商品的例子" class="header-anchor">#</a> 一个购买商品的例子：</h3> <p><img src="/blog/assets/img/DesignPatterns-3.eef4e4ec.png" alt="alt"></p> <p>如图，如果没有使用任何设计模式，这里应该是在<code>select</code>、<code>input</code>的各自onchange事件里，去获取<code>当前用户所选的条件下</code>的库存情况。</p> <p>如果使用了中介者模式，只需增加一个<code>中介者对象</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> goods <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'red'</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> mediator <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> colorSelect <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'colorSelect'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       numberInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'numberInput'</span><span class="token punctuation">)</span>
       nextBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'nextBtn'</span><span class="token punctuation">)</span>
   
   <span class="token keyword">return</span> <span class="token punctuation">{</span>
       <span class="token function">changed</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">var</span> color <span class="token operator">=</span> colorSelect<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
               number <span class="token operator">=</span> numberInput<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
               stock <span class="token operator">=</span> good<span class="token punctuation">[</span>color<span class="token punctuation">]</span>
               
               <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> colorSelect<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果选择的是颜色下拉框</span>
                   <span class="token comment">// ...</span>
               <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> numberInput<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果选择的是数量输入框</span>
                   <span class="token comment">// ...</span>
               <span class="token punctuation">}</span>

               nextBtn<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'购买'</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>可见，所有的对象会和<code>中介者对象</code>通信。当这些对象发生改变时，通知<code>中介者对象</code>，同时告诉<code>中介者对象</code>自己的身份，以便中介者辨别是谁发生了改变，剩下的事情就交给了中介者来完成。</p> <p><strong>好处</strong>：降低各个对象之间的耦合度</p> <p><strong>缺点</strong>：中介者对象自身往往难以维护</p> <h2 id="装饰者模式"><a href="#装饰者模式" class="header-anchor">#</a> 装饰者模式</h2> <p>装饰者模式可以 <strong>动态扩展一个实现类</strong> 的功能。</p> <blockquote><p>一幅画无论是否需要画框，都可以挂在墙上。但当用画框装饰时，可以让自己具有外壳保护、精美外观，同时又不被“伤害”。实际上最终是画框挂在墙上。</p></blockquote> <p>用处：</p> <ul><li>扩展一个类的功能</li> <li>功能的动态增加、动态撤销</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">12/17/2020, 1:23:39 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/skill/js/async-plan/" class="prev">
        JS异步解决方案的发展历程
      </a></span> <span class="next"><a href="/blog/skill/js/sort/">
        Array.prototype.sort
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.a7a8f945.js" defer></script><script src="/blog/assets/js/2.be8a5f26.js" defer></script><script src="/blog/assets/js/25.dd4f1ff5.js" defer></script>
  </body>
</html>
