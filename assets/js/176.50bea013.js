(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{722:function(e,t,r){"use strict";r.r(t);var s=r(43),a=Object(s.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"pwa"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#pwa"}},[e._v("#")]),e._v(" PWA")]),e._v(" "),r("p"),r("div",{staticClass:"table-of-contents"},[r("ul",[r("li",[r("a",{attrs:{href:"#pwa"}},[e._v("PWA")]),r("ul",[r("li",[r("a",{attrs:{href:"#和-web-app的区别"}},[e._v("和 Web App的区别")])]),r("li",[r("a",{attrs:{href:"#service-worker"}},[e._v("Service Worker")])]),r("li",[r("a",{attrs:{href:"#参考"}},[e._v("参考")])])])])])]),r("p"),e._v(" "),r("p",[e._v("PWA（Progressive Web App）是指 “渐进式Web应用”。")]),e._v(" "),r("blockquote",[r("p",[e._v("兼容性： iOS(11.3+)、Chrome for Android(40.0)")])]),e._v(" "),r("h2",{attrs:{id:"和-web-app的区别"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#和-web-app的区别"}},[e._v("#")]),e._v(" 和 Web App的区别")]),e._v(" "),r("p",[e._v("对于 Web App 来说，PWA 具有 “渐进增强” 的特点：")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("离线存储")])]),e._v(" "),r("li",[r("p",[e._v("通知推送")])]),e._v(" "),r("li",[r("p",[e._v("桌面访问")])])]),e._v(" "),r("p",[e._v("以上的功能的核心是 "),r("strong",[e._v("Service Worker")]),e._v("。")]),e._v(" "),r("h2",{attrs:{id:"service-worker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#service-worker"}},[e._v("#")]),e._v(" Service Worker")]),e._v(" "),r("p",[r("strong",[r("code",[e._v("Service Worker")]),e._v(" 相当于一个 Proxy，用于 监听、管理“请求和响应”。")])]),e._v(" "),r("p",[r("strong",[e._v("运行环境")]),e._v("：它运行在一个单独的线程下，不依赖某一个 WebView。")]),e._v(" "),r("p",[r("strong",[e._v("生命周期")]),e._v("：\n当浏览器进程关闭后，Service Worker线程也会关闭；当网页关闭后，Service Worker不会被销毁（若内存足够）。")]),e._v(" "),r("p",[r("strong",[e._v("用法")]),e._v("：")]),e._v(" "),r("ul",[r("li",[e._v("注册Service Worker"),r("div",{staticClass:"language-js line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[e._v("navigator"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("serviceWorker"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("register")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/m/music-mobile-sw.js'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])])]),e._v(" "),r("li",[e._v("通过 "),r("code",[e._v("self")]),e._v(" 访问全局上下文")]),e._v(" "),r("li",[e._v("针对 "),r("code",[e._v("https")]),e._v(" 、 "),r("code",[e._v("http://localhost")]),e._v("有效")])]),e._v(" "),r("h3",{attrs:{id:"离线存储"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#离线存储"}},[e._v("#")]),e._v(" 离线存储")]),e._v(" "),r("ol",[r("li",[e._v("注册 "),r("code",[e._v("Service Worker")])]),e._v(" "),r("li",[e._v("通过监听各类事件，来完成离线存储：\n"),r("ul",[r("li",[r("code",[e._v("install")]),e._v(" ：添加缓存文件")]),e._v(" "),r("li",[r("code",[e._v("activate")]),e._v(" ： 更新缓存文件")]),e._v(" "),r("li",[r("code",[e._v("fetch")]),e._v("： 拦截请求，直接返回缓存数据")])])])]),e._v(" "),r("p",[r("strong",[e._v("优点")]),e._v("：提升首屏性能。")]),e._v(" "),r("h3",{attrs:{id:"通知推送"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#通知推送"}},[e._v("#")]),e._v(" 通知推送")]),e._v(" "),r("p",[e._v("通过 "),r("code",[e._v("Push API")]),e._v(" 和 "),r("code",[e._v("Notification API")]),e._v(" 实现。")]),e._v(" "),r("img",{attrs:{src:"https://p5.music.126.net/obj/wo3DlcOGw6DClTvDisK1/7771575131/cd3e/213d/0c5d/6ad0cd4af2bcdd5d41765760dd5dd440.png",width:"300px"}}),e._v(" "),r("h3",{attrs:{id:"桌面访问"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#桌面访问"}},[e._v("#")]),e._v(" 桌面访问")]),e._v(" "),r("p",[e._v("通过 "),r("code",[e._v("manifest.json")]),e._v(" 文件，可以配置 “启动页”、“图标”等信息；也可以实现将 “网页” 添加到主屏幕；")]),e._v(" "),r("img",{attrs:{src:"https://p6.music.126.net/obj/wo3DlcOGw6DClTvDisK1/7771550768/d875/1261/30bb/2957e2eb443dff933c988b7ec7730b4d.png",width:"300px"}}),e._v(" "),r("img",{attrs:{src:"https://p6.music.126.net/obj/wo3DlcOGw6DClTvDisK1/7771590050/b9be/eaf6/2836/b88d525801fd4104e7fa4247c3b54edf.png",width:"500px"}}),e._v(" "),r("h2",{attrs:{id:"参考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.zhangxinxu.com/wordpress/2017/07/service-worker-cachestorage-offline-develop/",target:"_blank",rel:"noopener noreferrer"}},[e._v("借助Service Worker和cacheStorage缓存及离线开发"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=a.exports}}]);