(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{329:function(t,s,a){t.exports=a.p+"assets/img/git-branch.98d5a5da.jpg"},461:function(t,s,a){"use strict";a.r(s);var e=a(3),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"git规范"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git规范"}},[t._v("#")]),t._v(" Git规范")]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#git规范"}},[t._v("Git规范")]),e("ul",[e("li",[e("a",{attrs:{href:"#git分支命名"}},[t._v("Git分支命名")])]),e("li",[e("a",{attrs:{href:"#git分支的commit格式"}},[t._v("Git分支的Commit格式")])]),e("li",[e("a",{attrs:{href:"#commit校验工具——husky"}},[t._v("Commit校验工具——Husky")])])])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"git分支命名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git分支命名"}},[t._v("#")]),t._v(" Git分支命名")]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("master：主分支")])]),t._v(" "),e("ul",[e("li",[t._v("负责记录线上版本的迭代")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("develop：开发分支")])]),t._v(" "),e("ul",[e("li",[t._v("负责目前最新开发进度的版本")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("feature/*：功能分支（"),e("em",[t._v("“*”代表的是功能的简称")]),t._v("）")])]),t._v(" "),e("ul",[e("li",[t._v("用于开发新的功能")]),t._v(" "),e("li",[t._v("基于"),e("code",[t._v("develop分支")]),t._v("检出")]),t._v(" "),e("li",[t._v("局部开发完成并自测通过后，需要合并到"),e("code",[t._v("develop分支")]),t._v("，随后删除")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("release：提测分支")])]),t._v(" "),e("ul",[e("li",[t._v("用于代码上线准备，创建后由QA部署到测试环境进行测试")]),t._v(" "),e("li",[t._v("基于"),e("code",[t._v("develop分支")]),t._v("检出")]),t._v(" "),e("li",[t._v("提测过程中，发现bug，则在"),e("code",[t._v("release分支")]),t._v("进行修复；")]),t._v(" "),e("li",[t._v("上线前，需将"),e("code",[t._v("release分支")]),t._v("合并到"),e("code",[t._v("master")]),t._v("、"),e("code",[t._v("develop分支")])])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("hotfix：紧急修复分支")])]),t._v(" "),e("ul",[e("li",[t._v("用于线上bug的修复")]),t._v(" "),e("li",[t._v("基于"),e("code",[t._v("master分支")]),t._v("检出")]),t._v(" "),e("li",[t._v("修复完后，合并到"),e("code",[t._v("master")]),t._v("、"),e("code",[t._v("develop分支")])])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("refactor：代码优化分支")])]),t._v(" "),e("ul",[e("li",[t._v("用于代码的优化（一般在提测之后），优化在开发阶段产生的冗余或不完善的代码")]),t._v(" "),e("li",[t._v("基于"),e("code",[t._v("release分支")]),t._v("检出")]),t._v(" "),e("li",[t._v("优化完后，合并到"),e("code",[t._v("release分支")])])])])]),t._v(" "),e("h2",{attrs:{id:"git分支的commit格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git分支的commit格式"}},[t._v("#")]),t._v(" Git分支的Commit格式")]),t._v(" "),e("p",[t._v("格式："),e("code",[t._v("type: message")])]),t._v(" "),e("h3",{attrs:{id:"type（提交类型）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#type（提交类型）"}},[t._v("#")]),t._v(" type（提交类型）")]),t._v(" "),e("ul",[e("li",[t._v("feature: 新特性")]),t._v(" "),e("li",[t._v("refactor: 代码重构 && 优化")]),t._v(" "),e("li",[t._v("style: 样式修改")]),t._v(" "),e("li",[t._v("fix: bug修复（提测阶段 && 紧急线上）")]),t._v(" "),e("li",[t._v("docs: 文档修改（文案修改 && 文件更新）")])]),t._v(" "),e("h3",{attrs:{id:"message（提交描述）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#message（提交描述）"}},[t._v("#")]),t._v(" message（提交描述）")]),t._v(" "),e("p",[t._v("对应内容是commit简短描述：大致修改内容、影响文件/范围、进度等。")]),t._v(" "),e("blockquote",[e("p",[t._v("英文中文皆可，一般不超过50个字符")])]),t._v(" "),e("h3",{attrs:{id:"部分统一描述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部分统一描述"}},[t._v("#")]),t._v(" 部分统一描述")]),t._v(" "),e("ul",[e("li",[t._v("文件打包："),e("code",[t._v("npm run build")])]),t._v(" "),e("li",[t._v("代码格式化："),e("code",[t._v("npm run format")])])]),t._v(" "),e("h3",{attrs:{id:"git分支图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git分支图"}},[t._v("#")]),t._v(" Git分支图")]),t._v(" "),e("p",[e("img",{attrs:{src:a(329),alt:"alt"}})]),t._v(" "),e("h2",{attrs:{id:"commit校验工具——husky"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commit校验工具——husky"}},[t._v("#")]),t._v(" Commit校验工具——Husky")]),t._v(" "),e("p",[t._v("原理：在"),e("code",[t._v("git commit")]),t._v("提交代码前，利用Git钩子——"),e("code",[t._v("pre-commit")]),t._v("来实现代码规范检测。一旦发现检测结果带有"),e("code",[t._v("error")]),t._v("，则不允许提交到远程仓库。")]),t._v(" "),e("h3",{attrs:{id:"安装husky"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装husky"}},[t._v("#")]),t._v(" 安装Husky")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("yarn add husky -D\n")])])]),e("h3",{attrs:{id:"package-json配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#package-json配置"}},[t._v("#")]),t._v(" package.json配置")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"format"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prettier --write \\"./src/**/*.{js,jsx,json}\\""')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint --fix --ext .js,.jsx src"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"husky"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hooks"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pre-commit"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run format && npm run lint && git add ."')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br")])]),e("h3",{attrs:{id:"使用注意"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用注意"}},[t._v("#")]),t._v(" 使用注意")]),t._v(" "),e("p",[t._v("1、由于使用了"),e("code",[t._v("git add .")]),t._v("，会将"),e("code",[t._v("待定区")]),t._v("文件全部提交 "),e("em",[t._v("（尽量保证每次的“小功能提交”）")]),t._v("；")]),t._v(" "),e("p",[t._v("2、即使被husky退回提交，也会代码格式化、语法检查/修正；")]),t._v(" "),e("p",[t._v("3、ESLint的"),e("code",[t._v("warning")]),t._v("不会被Husky拦截 "),e("em",[t._v("（ESLint rules尽量配置成error）")]),t._v("；")]),t._v(" "),e("p",[t._v("4、跳过检测，强制提交（不推荐）")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v('git add . && git commit --no-verify -m "force commit"')])])])])}),[],!1,null,null,null);s.default=r.exports}}]);