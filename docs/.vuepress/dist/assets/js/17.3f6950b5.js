(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{361:function(t,s,a){t.exports=a.p+"assets/img/DesignPatterns-1.157d3bd9.png"},362:function(t,s,a){t.exports=a.p+"assets/img/DesignPatterns-2.34414d05.png"},363:function(t,s,a){t.exports=a.p+"assets/img/DesignPatterns-3.eef4e4ec.png"},435:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"js设计模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#js设计模式"}},[t._v("#")]),t._v(" JS设计模式")]),t._v(" "),n("blockquote",[n("p",[t._v("JS设计模式")])]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#js设计模式"}},[t._v("JS设计模式")]),n("ul",[n("li",[n("a",{attrs:{href:"#观察者模式"}},[t._v("观察者模式")])]),n("li",[n("a",{attrs:{href:"#发布-订阅模式"}},[t._v("发布-订阅模式")])]),n("li",[n("a",{attrs:{href:"#中介者模式"}},[t._v("中介者模式")])])])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"观察者模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#观察者模式"}},[t._v("#")]),t._v(" 观察者模式")]),t._v(" "),n("p",[t._v("观察者模式，是一个对象，维护一个依赖列表。当任何状态发生改变时，去通知每一个观察者。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(361),alt:"alt"}})]),t._v(" "),n("h2",{attrs:{id:"发布-订阅模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发布-订阅模式"}},[t._v("#")]),t._v(" 发布-订阅模式")]),t._v(" "),n("p",[t._v("和观察者模式非常相似，但是最大的区别在于：")]),t._v(" "),n("blockquote",[n("p",[t._v("在发布-订阅模式，发布者（publishers）不会直接将消息发送给特定的订阅者")])]),t._v(" "),n("p",[n("code",[t._v("发布者和订阅者")]),t._v("之间不知道对方的存在，需要通过"),n("code",[t._v("消息代理")]),t._v("来通信")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("观察者模式")]),t._v(" "),n("th",[t._v("发布订阅模式")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("观察者、被观察者可以直接联系")]),t._v(" "),n("td",[t._v("无直接依赖关系，要通过消息代理（例微信公众号平台）")])]),t._v(" "),n("tr",[n("td",[t._v("紧耦合")]),t._v(" "),n("td",[t._v("松耦合")])]),t._v(" "),n("tr",[n("td",[t._v("同步")]),t._v(" "),n("td",[t._v("异步")])]),t._v(" "),n("tr",[n("td",[t._v("当组件之间依赖关系简单时")]),t._v(" "),n("td",[t._v("当组件之间依赖关系复杂时")])])])]),t._v(" "),n("p",[n("img",{attrs:{src:a(362),alt:"alt"}})]),t._v(" "),n("h2",{attrs:{id:"中介者模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#中介者模式"}},[t._v("#")]),t._v(" 中介者模式")]),t._v(" "),n("p",[t._v("现实中的中介者：博彩公司")]),t._v(" "),n("ul",[n("li",[t._v("如果没有博彩公司，上千万的人一起计算赔率、输赢是非常困难")]),t._v(" "),n("li",[t._v("有了博彩公司作为中介者对象，每个人只需跟博彩公司发生关联，由博彩公司来根据每个人的投注情况计算好赔率（彩民赢了，找博彩公司拿；输了就把钱交给博彩公司）")])]),t._v(" "),n("h3",{attrs:{id:"一个购买商品的例子："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一个购买商品的例子："}},[t._v("#")]),t._v(" 一个购买商品的例子：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(363),alt:"alt"}})]),t._v(" "),n("p",[t._v("如图，如果没有使用任何设计模式，这里应该是在"),n("code",[t._v("select")]),t._v("、"),n("code",[t._v("input")]),t._v("的各自onchange事件里，去获取"),n("code",[t._v("当前用户所选的条件下")]),t._v("的库存情况。")]),t._v(" "),n("p",[t._v("如果使用了中介者模式，只需增加一个"),n("code",[t._v("中介者对象")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" goods "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'red'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" mediator "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" colorSelect "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'colorSelect'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       numberInput "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'numberInput'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n       nextBtn "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nextBtn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   \n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("changed")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("obj")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" color "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" colorSelect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n               number "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" numberInput"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n               stock "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" good"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("color"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n               \n               "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" colorSelect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果选择的是颜色下拉框")]),t._v("\n                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n               "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" numberInput"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果选择的是数量输入框")]),t._v("\n                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n               "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n               nextBtn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'购买'")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br")])]),n("p",[t._v("可见，所有的对象会和"),n("code",[t._v("中介者对象")]),t._v("通信。当这些对象发生改变时，通知"),n("code",[t._v("中介者对象")]),t._v("，同时告诉"),n("code",[t._v("中介者对象")]),t._v("自己的身份，以便中介者辨别是谁发生了改变，剩下的事情就交给了中介者来完成。")]),t._v(" "),n("p",[n("strong",[t._v("好处")]),t._v("：降低各个对象之间的耦合度")]),t._v(" "),n("p",[n("strong",[t._v("缺点")]),t._v("：中介者对象自身往往难以维护")])])}),[],!1,null,null,null);s.default=e.exports}}]);